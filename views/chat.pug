extends layout
block headscripts
  script(type='text/javascript' src='https://code.jquery.com/jquery-3.1.1.min.js')
  script(type='text/javascript' src='/socket.io/socket.io.js')
  script(src='https://use.fontawesome.com/f52a816870.js')
block content
  .chats
    header.chat-header
      .left
        h3 Chats
      .right
        i.fa.fa-ellipsis-v(aria-hidden="true")#user-settings
    .user-settings#user-nav
      .user-settings-header
        h3 Settings
        .right
          a.closebtn#closebtn &times;
      .user-settings-body
        h3 Nickname
        h3= nickname
    .chat-list
      .chat#newchat
        .chat-new
          i.fa.fa-plus.fa-fw(aria-hidden="true")#chat-settings
        .chat-title
          h4 Create new
      each chat in chats
        if chat.public
          .chat#selectChat
            .chat-icon
            .chat-title
              h4
                = chat.title
  .messages
    header.convo-header
      .left
        h3#chatTitle Messages
      .right
        i.fa.fa-ellipsis-v(aria-hidden="true")
    script. 
      var nick = !{JSON.stringify(nickname)}
      var user = !{JSON.stringify(user)}
      var chats = !{JSON.stringify(chats)}
    script(type='text/javascript' src='/javascripts/chat.js')

    each chat in chats
      - var chatid = chat.title
      .convo(id=chatid style='display:none')
        each msg in chat.messages
          .msg-container
            .msg
              .msg-author
                = msg.sender
              .msg-content
                = msg.content
              .msg-timestamp
                = msg.timestamp
    footer.convo-footer
      form.compose
        .input-container
          input.input(type='text' value='')
        .send-container
          input(type='submit' value='Send')
  script(type='text/javascript' src='/javascripts/settings.js')
