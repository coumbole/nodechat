extends layout
block headscripts
  script(type='text/javascript' src='https://code.jquery.com/jquery-3.1.1.min.js')
  script(type='text/javascript' src='/socket.io/socket.io.js')
block content
  .chats
    header.chat-header
      h3 Chats
    .chat-list
      .chat#newchat
        .chat-title
          h4 Create new
      each chat in chats
        .chat#selectChat
          .chat-icon
          .chat-title
            h4
              = chat.title
  .messages
    header.convo-header
      h3#chatTitle Messages
    script. 
      var nick = !{JSON.stringify(nickname)}
      var user = !{JSON.stringify(user)}
      var chats = !{JSON.stringify(chats)}
    script(type='text/javascript' src='/javascripts/chat.js')

    each chat in chats
      - var chatid = chat.title
      .convo(id=chatid style='display:none')
        each msg in chat.messages
          .msg-container
            .msg
              .msg-author
                = msg.sender
              .msg-content
                = msg.content
              .msg-timestamp
                = msg.timestamp
    footer.convo-footer
      form.compose
        .input-container
          input.input(type='text' value='')
        .send-container
          input(type='submit' value='Send')
